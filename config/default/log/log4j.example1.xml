<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "jar:file:/bigdisk/dev/lib/test/log4j.jar!/org/apache/log4j/xml/log4j.dtd" [
         <!ENTITY logger   "org.mmbase.util.logging.log4j.Log4jImpl" >
         <!ENTITY priority "org.mmbase.util.logging.log4j.Log4jPriority" >
         <!ENTITY logdir   "/bigdisk/dev/logs/mmbase/" >
]>

<!-- 
  MMBase logging configuration 

  This is an example. It does the following.

  It uses two appenders (both are very slow!). The first one is the regular log file 
  and the second is used only to log events from the security classes.

  Further it is demonstrated how to override logging priorities.

-->

<log4j:configuration>

<!-- appenders -->
<!-- This file is rather slow, because of code information, use it -->
<!-- only during debugging, or in classes which are not performance -->
<!-- critical -->
<appender name="logfile" class="org.apache.log4j.FileAppender" >
    <param name="File"   value="&logdir;mmtest.log" />
    <param name="Append" value="true" />
    <layout class="org.apache.log4j.PatternLayout">
	    <param name="ConversionPattern" value="%d %-5p %c{4} %M.%L %x - %m%n" />
    </layout>
</appender>


<appender name="securityfile" class="org.apache.log4j.FileAppender" >
    <param name="File"   value="&logdir;mmtestsecurity.log" />
    <param name="Append" value="true" />
    <layout class="org.apache.log4j.PatternLayout">
         <param name="ConversionPattern" value="%d %-5p %c{4} %M.%L %x - %m%n" />
    </layout>
</appender>

<!-- categories -->

<!-- base category for all MMBase classes -->
<category name="org.mmbase" class ="&logger;">
<!-- nothing special -->
</category>

<category name="org.mmbase.security" class ="&logger;" additivity="false" >
  <priority class="&priority;" value ="info" />
  <appender-ref ref="securityfile" />
</category>

<category name="STDERR" class ="&logger;">
    <priority class="&priority;" value ="debug" />	
</category>

<root>
    <priority class="&priority;" value ="info" />
   	<appender-ref ref="logfile" />
</root>

</log4j:configuration>
