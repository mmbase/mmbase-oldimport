<!DOCTYPE wizard-schema PUBLIC "-//MMBase/DTD editwizard 1.0//EN" "http://www.mmbase.org/dtd/wizard-schema_1_0.dtd">
<wizard-schema id="empty">
    <title>Koppelvraag Editor</title>

    <action type="create">
        <object type="couplingquestions">
            <relation destination="$origin" role="posrel" createdir="source"/>
            <field name="layout">0</field>
        </object>
    </action>

    <action type="load">
        <relation destination="couplinganswers" role="related" />
        <relation destination="feedback" role="related" />
        <relation destination="metadata" role="related"/>
        <relation destination="competencies" role="needcomp" />
        <relation destination="competencies" role="developcomp" />
    </action>

    <action type="delete" />

    <steps>
        <step form-schema="step1" />
        <step form-schema="step2" />
    </steps>

    <form-schema id="step1">
        <title>Koppel vraag invoeren</title>
        <field name="title" >
            <prompt>Titel</prompt>
        </field>
        <field name="text" ftype="html" dtminlength="0">
            <prompt>Tekst</prompt>
        </field>

        <list destination="couplinganswers" role="related" minoccurs="0" maxoccurs="*" ordertype="number" orderby="number">
            <title>Bijbehorende antwoorden</title>
            <item>
                <field name="text1" ftype="line">
                    <prompt>Tekst Links</prompt>
                    <description>De linker antwoord tekst</description>
                </field>
                <field name="text2" ftype="line">
                    <prompt>Tekst Rechts</prompt>
                    <description>De rechter antwoord tekst</description>
                </field>
            </item>

            <action type="create">
                <relation role="related">
                    <object type="couplinganswers" />
                </relation>
            </action>

            <action type="add">
                <relation role="related">
                    <object type="couplinganswers" />
                </relation>
            </action>

            <command name="search" nodepath="couplinganswers" fields="text" age="-1" orderby="number" directions="down">
                <prompt>Zoeken naar Antwoorden</prompt>
                <search-filter>
                    <name>Linkertekst bevat</name>
                    <search-fields>text1</search-fields>
                </search-filter>
                <search-filter>
                    <name>Rechtertekst bevat</name>
                    <search-fields>text2</search-fields>
                </search-filter>
            </command>

            <command name="insert" />
        </list>
        <list role="related" extends="list/feedback.xml" />
    </form-schema>
    <form-schema id="step2">
        <title>Competenties invoeren</title>
        <field name="name" ftype="data"/>
        <list extends="list/needcompetencies.xml"/>
        <list extends="list/developcompetencies.xml"/>
    </form-schema>
</wizard-schema>
