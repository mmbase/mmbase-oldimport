<?xml version="1.0" ?>
<builder 
    xmlns="http://www.mmbase.org/xmlns/builder"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.mmbase.org/xmlns/builder 
                        http://www.mmbase.org/xmlns/builder.xsd"                        
    name="mmbaseusers" maintainer="www.mmbase.org" version="0" extends="object">
  <class>org.mmbase.security.implementation.cloudcontext.builders.Users</class>
  <names>
    <singular xml:lang="en">Security Account</singular>
    <singular xml:lang="nl">Security account</singular>
    <singular xml:lang="eo">Sekureca uzulo</singular>
    <plural xml:lang="en">Security Users</plural>
    <plural xml:lang="nl">Security gebruikers</plural>
    <plural xml:lang="eo">Sekurecaj uzuloj</plural>
  </names>
  <descriptions>
    <description xml:lang="en">
      MMBase users, builder which contains all users from the system. Passwords will be encrypted
      with the encoding mentioned in properties
    </description>
    <description xml:lang="nl">
      MMBase gebruikers. In deze builder kunnen alle gebruikers van het systeem worden
      opgeslagen. Wachtwoorden worden gecodeert.
    </description>
    <description xml:lang="eo">
      MMBase-uzantoj. En ĉi tiu stoko la uzantoj de la sistemo povas stokiĝi. Pasvortoj estas
      ĉifrataj.
    </description>
  </descriptions>
  <properties>
    <!--
        String identifying how the passwords must be stored in the database.  This can be a one-way
        encryption.  This default to 'MD5', and that is quite ok. The disadvantage of MD5 is that it
        is a one-way encryption, so you can never find the password back, and it must actually be
        remembered by the client.
    -->
    <property name="encoding">MD5</property>
    <!--
        With the option 'allowencodedpassword' you can actually sabotage the 'encoding' of the password again.
        When this is true, then you can also loging with name/encodedpassword, and you can provide the encoded password directly. 
        This can perhaps have been stored in a cookie.
        You may want this if the passwords are sensitive, but not necessarily only for this site.
        Switching this to true makes the 'encoded' password about as good as the password itself.
    -->
    <property name="allowencodedpassword">false</property>
  </properties>
  <fieldlist>
    <field>
      <gui>
        <guiname xml:lang="nl">Account</guiname>
        <guiname xml:lang="eo">Uzulo</guiname>
        <guiname xml:lang="en">Account</guiname>
      </gui>
      <editor>
        <positions>
          <list>1</list>
        </positions>
      </editor>
      <datatype base="eline" xmlns="http://www.mmbase.org/xmlns/datatypes" />
      <db>
        <name>username</name>
        <type key="true" notnull="true" size="32" state="persistent">STRING</type>
      </db>
    </field>
    <field>
      <gui>
        <guiname xml:lang="nl">Wachtwoord</guiname>
        <guiname xml:lang="eo">Pasvorto</guiname>
        <guiname xml:lang="en">Password</guiname>
      </gui>
      <editor>
        <positions>
          <list>-1</list>
          <search>-1</search>
        </positions>
      </editor>
      <datatype base="md5password" xmlns="http://www.mmbase.org/xmlns/datatypes" />
      <db>
        <name>password</name>
        <type notnull="true" size="32" state="persistent">STRING</type>
      </db>
    </field>
    <field>
      <gui>
        <guiname xml:lang="nl">Bevestig wachtwoord</guiname>
        <guiname xml:lang="eo">Konfirmu pasvorton</guiname>
        <guiname xml:lang="en">Confirm Password</guiname>
      </gui>
      <editor>
        <positions>
          <list>-1</list>
          <search>-1</search>
        </positions>
      </editor>
      <datatype base="confirmpassword" xmlns="http://www.mmbase.org/xmlns/datatypes" />
      <db>
        <name>confirmpassword</name>
        <type notnull="false" size="32" state="virtual">STRING</type>
      </db>
    </field>
    <field>
      <gui>
        <guiname xml:lang="nl">Default Context</guiname>
        <guiname xml:lang="en">Default Context</guiname>
        <guiname xml:lang="eo">Defaŭlta konteksto</guiname>
      </gui>
      <editor>
        <positions>
          <list>2</list>
        </positions>
      </editor>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <enumeration>
          <query type="mmbasecontexts" xmlns="http://www.mmbase.org/xmlns/searchquery" >
            <sortorder field="name" />
          </query>
        </enumeration>
      </datatype>
      <db>
        <name>defaultcontext</name>
        <type key="false" notnull="false" required="true" state="persistent">NODE</type>
      </db>
    </field>
    <field>
      <gui>
        <guiname xml:lang="nl">Status</guiname>
        <guiname xml:lang="en">Status</guiname>
        <guiname xml:lang="eo">Statuso</guiname>
      </gui>
      <editor>
        <positions>
          <list>3</list>
        </positions>
      </editor>
      <datatype xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="0" />
        <enumeration>
          <entry basename="org.mmbase.security.status" />
        </enumeration>
      </datatype>
      <db>
        <name>status</name>
        <type notnull="true" required="true" state="persistent">INTEGER</type>
      </db>
    </field>

    <field>
      <gui>
        <guiname xml:lang="nl">Geldig vanaf</guiname>
        <guiname xml:lang="en">Valid from</guiname>
        <guiname xml:lang="eo">Valida ekde</guiname>
      </gui>
      <editor>
        <positions>
          <list>4</list>
        </positions>
      </editor>
      <datatype base="datetime" xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="today" />
        <minInclusive enforce="never" value="yesterday"  />
        <maxInclusive enforce="never" value="today + 10 year"  />
      </datatype>
      <db>
        <name>validfrom</name>
        <type notnull="true" state="persistent">DATETIME</type>
      </db>
    </field>

    <field>
      <gui>
        <guiname xml:lang="nl">Geldig tot</guiname>
        <guiname xml:lang="en">Valid to</guiname>
        <guiname xml:lang="eo">Valida ĝis</guiname>
      </gui>
      <editor>
        <positions>
          <list>5</list>
        </positions>
      </editor>
      <datatype base="datetime" xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="today + 100 year" />
        <minInclusive enforce="never" value="yesterday"  />
        <maxInclusive enforce="never" value="today + 199 year"  />
      </datatype>
      <db>
        <name>validto</name>
        <type notnull="true" state="persistent">DATETIME</type>
      </db>
    </field>

    <field>
      <gui>
        <guiname xml:lang="nl">Laatste login</guiname>
        <guiname xml:lang="en">Last logon</guiname>
        <guiname xml:lang="eo">Lastfoja saluto</guiname>
      </gui>
      <editor>
        <positions>
          <list>6</list>
          <search>6</search>
        </positions>
      </editor>
      <datatype base="datetime" xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="toyear - 100 year" />
        <minInclusive enforce="never" value="toyear - 100 year"  />
        <maxInclusive enforce="never" value="now"  />
      </datatype>
      <db>
        <name>lastlogon</name>
        <type notnull="true" state="system">DATETIME</type>
      </db>
    </field>

  </fieldlist>
</builder>
